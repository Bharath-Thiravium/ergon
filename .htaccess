RewriteEngine On
DirectoryIndex index.php

# Allow access to public assets
RewriteCond %{REQUEST_URI} ^/ergon/public/
RewriteRule ^(.*)$ - [L]

# Handle existing files
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ - [L]

# Handle existing directories
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*)$ - [L]

# Route everything else through index.php
RewriteRule ^(.*)$ index.php [QSA,L]

# Hide sensitive files
<Files ~ "^\.">
    Require all denied
</Files>

<Files ~ "\.env$">
    Require all denied
</Files>