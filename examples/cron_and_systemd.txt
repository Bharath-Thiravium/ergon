# Cron Configuration (Recommended)

# Invoice sync every 10 minutes
*/10 * * * * /usr/bin/php /var/www/ergon/src/cli/sync_invoices.php --prefix=ERGN >> /var/log/finance_sync_ERGN.log 2>&1

# Activities sync every 5 minutes
*/5 * * * * /usr/bin/php /var/www/ergon/src/cli/sync_activities.php --prefix=ERGN >> /var/log/finance_activities_ERGN.log 2>&1

# Cashflow computation every 15 minutes
*/15 * * * * /usr/bin/php /var/www/ergon/src/cli/compute_cashflow.php --prefix=ERGN >> /var/log/finance_cashflow_ERGN.log 2>&1

# Full syncs daily
0 2 * * * /usr/bin/php /var/www/ergon/src/cli/sync_invoices.php --prefix=ERGN --full >> /var/log/finance_sync_ERGN_full.log 2>&1
0 3 * * * /usr/bin/php /var/www/ergon/src/cli/sync_activities.php --prefix=ERGN --full >> /var/log/finance_activities_ERGN_full.log 2>&1
0 4 * * * /usr/bin/php /var/www/ergon/src/cli/compute_cashflow.php --prefix=ERGN --full >> /var/log/finance_cashflow_ERGN_full.log 2>&1

# Systemd Service Configuration (Alternative)

# /etc/systemd/system/finance-sync-invoices@.service
[Unit]
Description=Finance Invoice Sync for %i
After=network.target

[Service]
Type=oneshot
User=www-data
ExecStart=/usr/bin/php /var/www/ergon/src/cli/sync_invoices.php --prefix=%i
StandardOutput=journal
StandardError=journal

# /etc/systemd/system/finance-sync-invoices@.timer
[Unit]
Description=Run Finance Invoice Sync for %i every 10 minutes
Requires=finance-sync-invoices@%i.service

[Timer]
OnCalendar=*:0/10
Persistent=true

[Install]
WantedBy=timers.target

# Enable and start
# systemctl enable finance-sync-invoices@ERGN.timer
# systemctl start finance-sync-invoices@ERGN.timer