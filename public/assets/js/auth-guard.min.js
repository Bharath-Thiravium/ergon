// Auth Guard - Session timeout check
(function() {
    let lastActivity = Date.now();
    const TIMEOUT = 3600000; // 1 hour
    
    function checkSession() {
        if (Date.now() - lastActivity > TIMEOUT) {
            window.location.href = '/ergon/login?timeout=1';
        }
    }
    
    function updateActivity() {
        lastActivity = Date.now();
    }
    
    // Track user activity
    document.addEventListener('click', updateActivity);
    document.addEventListener('keypress', updateActivity);
    document.addEventListener('scroll', updateActivity);
    
    // Check session every 5 minutes
    setInterval(checkSession, 300000);
})();