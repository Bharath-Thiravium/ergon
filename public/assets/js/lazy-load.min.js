// ERGON Lazy Loading & Performance Enhancements
document.addEventListener('DOMContentLoaded',function(){
// Lazy load images
document.querySelectorAll('img[data-src]').forEach(img=>{
const observer=new IntersectionObserver(entries=>{
entries.forEach(e=>{
if(e.isIntersecting){
img.src=img.dataset.src;
img.removeAttribute('data-src');
observer.unobserve(img);
}});});
observer.observe(img);});

// Preload critical resources
const preloadLinks=['ergon-combined.min.css','ergon-core.min.js'];
preloadLinks.forEach(href=>{
const link=document.createElement('link');
link.rel='preload';
link.href='/ergon/public/assets/css/'+href;
link.as=href.endsWith('.css')?'style':'script';
document.head.appendChild(link);});

// Performance monitoring
if(window.performance){
window.addEventListener('load',()=>{
setTimeout(()=>{
const perf=performance.getEntriesByType('navigation')[0];
console.log('Page Load Time:',Math.round(perf.loadEventEnd-perf.fetchStart)+'ms');
},1000);});}});